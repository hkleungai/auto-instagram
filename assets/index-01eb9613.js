(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var l={};const p="bold|bolder|lighter|[1-9]00",C="italic|oblique",x="small-caps",w="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",v="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",h=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,y=new RegExp(`(${p}) +`,"i"),E=new RegExp(`(${C}) +`,"i"),S=new RegExp(`(${x}) +`,"i"),b=new RegExp(`(${w}) +`,"i"),O=new RegExp(`([\\d\\.]+)(${v}) *((?:${h})( *, *(?:${h}))*)`),f={},I=16;var _=o=>{if(f[o])return f[o];const e=O.exec(o);if(!e)return;const t={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(e[1]),unit:e[2],family:e[3].replace(/["']/g,"").replace(/ *, */g,",")};let s,n,i,r;const a=o.substring(0,e.index);switch((s=y.exec(a))&&(t.weight=s[1]),(n=E.exec(a))&&(t.style=n[1]),(i=S.exec(a))&&(t.variant=i[1]),(r=b.exec(a))&&(t.stretch=r[1]),t.unit){case"pt":t.size/=.75;break;case"pc":t.size*=16;break;case"in":t.size*=96;break;case"cm":t.size*=96/2.54;break;case"mm":t.size*=96/25.4;break;case"%":break;case"em":case"rem":t.size*=I/.75;break;case"q":t.size*=96/25.4/4;break}return f[o]=t};const z=_;l.parseFont=z;var F=l.createCanvas=function(o,e){return Object.assign(document.createElement("canvas"),{width:o,height:e})};l.createImageData=function(o,e,t){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(o);case 2:return new ImageData(o,e);default:return new ImageData(o,e,t)}};l.loadImage=function(o,e){return new Promise(function(t,s){const n=Object.assign(document.createElement("img"),e);function i(){n.onload=null,n.onerror=null}n.onload=function(){i(),t(n)},n.onerror=function(){i(),s(new Error('Failed to load the image "'+o+'"'))},n.src=o})};class u extends Error{constructor(e,t){const s=t!=null&&t.__scope?`--${t==null?void 0:t.__scope}-- ${e}`:e;t==null||delete t.__scope,super(s,t)}}class c{static get SIZE(){return 800}}c.FONT_SIZES=[1,2,4,5,8,10,16,20,25,32,40,50,80,100,160,200,400,800];c.TITLE_UNDERLINE_SPACING_LOOKUP=new Proxy({WEB:1.125,NODE:1.3125},{get(o,e){if(Object.hasOwn(o,e))return o[e];throw new u(`Undetermined title-underline spacing for platform = ${e}`,{__scope:"canvas-config"})}});class R{constructor(e,t,s,n){this.fontConfig=e,this.platform=t,this.nodeCanvas=F(c.SIZE,c.SIZE),this.nodeCanvasContext=this.getNodeCanvasContext(),n&&(this.title=n),this.content=this.getContent(s),this.fillArticle()}getNodeCanvasContext(){l.registerFont&&this.fontConfig.path&&this.fontConfig.fontFace&&l.registerFont(this.fontConfig.path,this.fontConfig.fontFace);const e=this.nodeCanvas.getContext("2d");return e.fillStyle="#ffffff",e.fillRect(0,0,c.SIZE,c.SIZE),e.font=`${this.fontConfig.size}px '${this.fontConfig.fontFace.family}'`,e.textAlign="center",e.textBaseline="top",e.fillStyle="#000000",e}getContent(e){const{maxRow:t,maxColumn:s}=this.fontConfig,n=this.title?-1:0,i=s*(t+n)-2;return e.length<=i?e:e.slice(0,i-3)+"。".repeat(3)}fillTitle(){if(!this.title)return;const{size:e}=this.fontConfig,t=c.SIZE/2,s=e*1.125;this.nodeCanvasContext.fillText(this.title,t,s),this.nodeCanvasContext.fillRect(c.SIZE/2-e*(this.title.length/2),s+e*c.TITLE_UNDERLINE_SPACING_LOOKUP[this.platform],e*this.title.length,1)}fillContent(){const{size:e,maxColumn:t}=this.fontConfig;for(let s=0,n=+!!this.title;s<this.content.length;n++){const i=s==0?-2:0,r=this.content.slice(s,s+t+i),a=c.SIZE/2-e*((t-r.length)/2+i),m=n*e*1.25+e*1.125;this.nodeCanvasContext.fillText(r,a,m),s+=t+i}}fillArticle(){this.fillTitle(),this.fillContent()}toJpegBuffer(){if(this.platform!=="NODE")throw new u(`Unsupported operation for platform = ${this.platform}`,{__scope:"canvas-to-jpeg-buffer"});return this.nodeCanvas.toBuffer("image/jpeg")}}const d=class g{constructor(e,t,s){this.size=e,this.fontFace=t,this.path=s,this.maxRow=g.MAX_ROW_LOOKUP[this.size],this.maxColumn=c.SIZE/this.size-2}};d.MAX_ROW_LOOKUP=new Proxy({20:30,25:24,32:18,40:14,50:11,80:6},{get(o,e){const t=e;if(Object.hasOwn(o,t))return o[t];throw new u(`Undetermined max line number for font size = ${t}`,{__scope:"canvas-font-config"})}});let L=d;function T(o){let e=0;const t=s=>{e=s,o.innerHTML=`count is ${e}`};o.addEventListener("click",()=>t(e+1)),t(0)}document.querySelector("#app").innerHTML=`
  <div>
    <h1>Vite + TypeScript</h1>
    <div class="card">
      <button id="counter" type="button"></button>
    </div>
    <p class="read-the-docs">
      Click on the Vite and TypeScript logos to learn more
    </p>
  </div>
`;T(document.querySelector("#counter"));async function $(){for(const o of[20,25,32,40,50,80]){const e=new L(o,{family:"BK"}),t={short:{title:"你好",content:"你好世界"},medium:{title:"你好嗎",content:"你好世界你真美，你好世界你真美。"},long:{title:"心經－原文",content:"觀自在菩薩，行深般若波羅蜜多時，照見五蘊皆空，度一切苦厄。舍利子！色不異空，空不異色；色即是空，空即是色，受想行識亦復如是。舍利子！是諸法空相，不生不滅，不垢不淨，不增不減。是故，空中無色，無受想行識；無眼耳鼻舌身意；無色聲香味觸法；無眼界，乃至無意識界；無無明，亦無無明盡，乃至無老死，亦無老死盡；無苦集滅道；無智亦無得。以無所得故，菩提薩埵。依般若波羅蜜多故，心無罣礙；無罣礙故，無有恐怖，遠離顛倒夢想，究竟涅槃。三世諸佛，依般若波羅蜜多故，得阿耨多羅三藐三菩提。故知：般若波羅蜜多是大神咒，是大明咒，是無上咒，是無等等咒，能除一切苦，真實不虛。故說般若波羅蜜多咒，即說咒曰：揭諦揭諦，波羅揭諦，波羅僧揭諦，菩提薩婆訶。"}};for(const s in t){const n=[{withTitle:!1},{withTitle:!0}];for(const{withTitle:i}of n){const r=new R(e,"WEB",t[s].content,i?t[s].title:void 0);document.querySelector("#app").appendChild(r.nodeCanvas)}}}}$();
