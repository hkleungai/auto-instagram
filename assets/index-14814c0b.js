(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const ze=(e,t)=>e===t,Me=Symbol("solid-track"),le={equals:ze};let We=Oe;const W=1,ae=2,Fe={owned:null,cleanups:null,context:null,owner:null},he={};var _=null;let pe=null,S=null,P=null,H=null,ue=0;function ie(e,t){const n=S,o=_,i=e.length===0,s=t===void 0?o:t,l=i?Fe:{owned:null,cleanups:null,context:s?s.context:null,owner:s},r=i?e:()=>e(()=>M(()=>de(l)));_=l,S=null;try{return K(r,!0)}finally{S=n,_=o}}function G(e,t){t=t?Object.assign({},le,t):le;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},o=i=>(typeof i=="function"&&(i=i(n.value)),Le(n,i));return[Pe.bind(n),o]}function xe(e,t,n){const o=be(e,t,!0,W);ee(o)}function Z(e,t,n){const o=be(e,t,!1,W);ee(o)}function Y(e,t,n){n=n?Object.assign({},le,n):le;const o=be(e,t,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=n.equals||void 0,ee(o),Pe.bind(o)}function Ue(e){return e&&typeof e=="object"&&"then"in e}function qe(e,t,n){let o,i,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(o=!0,i=e,s=t||{}):(o=e,i=t,s=n||{});let l=null,r=he,c=!1,f="initialValue"in s,a=typeof o=="function"&&Y(o);const h=new Set,[m,A]=(s.storage||G)(s.initialValue),[T,u]=G(void 0),[p,d]=G(void 0,{equals:!1}),[x,g]=G(f?"ready":"unresolved");function v(E,b,w,F){return l===E&&(l=null,F!==void 0&&(f=!0),(E===r||b===r)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(F,{value:b})),r=he,L(b,w)),b}function L(E,b){K(()=>{b===void 0&&A(()=>E),g(b!==void 0?"errored":f?"ready":"unresolved"),u(b);for(const w of h.keys())w.decrement();h.clear()},!1)}function O(){const E=Xe,b=m(),w=T();if(w!==void 0&&!l)throw w;return S&&!S.user&&E&&xe(()=>{p(),l&&(E.resolved||h.has(E)||(E.increment(),h.add(E)))}),b}function B(E=!0){if(E!==!1&&c)return;c=!1;const b=a?a():o;if(b==null||b===!1){v(l,M(m));return}const w=r!==he?r:M(()=>i(b,{value:m(),refetching:E}));return Ue(w)?(l=w,"value"in w?(w.status==="success"?v(l,w.value,void 0,b):v(l,void 0,void 0,b),w):(c=!0,queueMicrotask(()=>c=!1),K(()=>{g(f?"refreshing":"pending"),d()},!1),w.then(F=>v(w,F,void 0,b),F=>v(w,void 0,Re(F),b)))):(v(l,w,void 0,b),w)}return Object.defineProperties(O,{state:{get:()=>x()},error:{get:()=>T()},loading:{get(){const E=x();return E==="pending"||E==="refreshing"}},latest:{get(){if(!f)return O();const E=T();if(E&&!l)throw E;return m()}}}),a?xe(()=>B(!1)):B(!1),[O,{refetch:B,mutate:A}]}function M(e){if(S===null)return e();const t=S;S=null;try{return e()}finally{S=t}}function Ze(e){return _===null||(_.cleanups===null?_.cleanups=[e]:_.cleanups.push(e)),e}function He(e){const t=Y(e),n=Y(()=>we(t()));return n.toArray=()=>{const o=n();return Array.isArray(o)?o:o!=null?[o]:[]},n}let Xe;function Pe(){if(this.sources&&this.state)if(this.state===W)ee(this);else{const e=P;P=null,K(()=>ce(this),!1),P=e}if(S){const e=this.observers?this.observers.length:0;S.sources?(S.sources.push(this),S.sourceSlots.push(e)):(S.sources=[this],S.sourceSlots=[e]),this.observers?(this.observers.push(S),this.observerSlots.push(S.sources.length-1)):(this.observers=[S],this.observerSlots=[S.sources.length-1])}return this.value}function Le(e,t,n){let o=e.value;return(!e.comparator||!e.comparator(o,t))&&(e.value=t,e.observers&&e.observers.length&&K(()=>{for(let i=0;i<e.observers.length;i+=1){const s=e.observers[i],l=pe&&pe.running;l&&pe.disposed.has(s),(l?!s.tState:!s.state)&&(s.pure?P.push(s):H.push(s),s.observers&&Ne(s)),l||(s.state=W)}if(P.length>1e6)throw P=[],new Error},!1)),t}function ee(e){if(!e.fn)return;de(e);const t=_,n=S,o=ue;S=_=e,Ke(e,e.value,o),S=n,_=t}function Ke(e,t,n){let o;try{o=e.fn(t)}catch(i){return e.pure&&(e.state=W,e.owned&&e.owned.forEach(de),e.owned=null),e.updatedAt=n+1,ke(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Le(e,o):e.value=o,e.updatedAt=n)}function be(e,t,n,o=W,i){const s={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:_,context:_?_.context:null,pure:n};return _===null||_!==Fe&&(_.owned?_.owned.push(s):_.owned=[s]),s}function Ie(e){if(e.state===0)return;if(e.state===ae)return ce(e);if(e.suspense&&M(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ue);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===W)ee(e);else if(e.state===ae){const o=P;P=null,K(()=>ce(e,t[0]),!1),P=o}}function K(e,t){if(P)return e();let n=!1;t||(P=[]),H?n=!0:H=[],ue++;try{const o=e();return Ve(n),o}catch(o){n||(H=null),P=null,ke(o)}}function Ve(e){if(P&&(Oe(P),P=null),e)return;const t=H;H=null,t.length&&K(()=>We(t),!1)}function Oe(e){for(let t=0;t<e.length;t++)Ie(e[t])}function ce(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const o=e.sources[n];if(o.sources){const i=o.state;i===W?o!==t&&(!o.updatedAt||o.updatedAt<ue)&&Ie(o):i===ae&&ce(o,t)}}}function Ne(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=ae,n.pure?P.push(n):H.push(n),n.observers&&Ne(n))}}function de(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),o=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const s=i.pop(),l=n.observerSlots.pop();o<i.length&&(s.sourceSlots[l]=o,i[o]=s,n.observerSlots[o]=l)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)de(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Re(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ke(e,t=_){throw Re(e)}function we(e){if(typeof e=="function"&&!e.length)return we(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const o=we(e[n]);Array.isArray(o)?t.push.apply(t,o):t.push(o)}return t}return e}const Ge=Symbol("fallback");function Ee(e){for(let t=0;t<e.length;t++)e[t]()}function Ye(e,t,n={}){let o=[],i=[],s=[],l=0,r=t.length>1?[]:null;return Ze(()=>Ee(s)),()=>{let c=e()||[],f,a;return c[Me],M(()=>{let m=c.length,A,T,u,p,d,x,g,v,L;if(m===0)l!==0&&(Ee(s),s=[],o=[],i=[],l=0,r&&(r=[])),n.fallback&&(o=[Ge],i[0]=ie(O=>(s[0]=O,n.fallback())),l=1);else if(l===0){for(i=new Array(m),a=0;a<m;a++)o[a]=c[a],i[a]=ie(h);l=m}else{for(u=new Array(m),p=new Array(m),r&&(d=new Array(m)),x=0,g=Math.min(l,m);x<g&&o[x]===c[x];x++);for(g=l-1,v=m-1;g>=x&&v>=x&&o[g]===c[v];g--,v--)u[v]=i[g],p[v]=s[g],r&&(d[v]=r[g]);for(A=new Map,T=new Array(v+1),a=v;a>=x;a--)L=c[a],f=A.get(L),T[a]=f===void 0?-1:f,A.set(L,a);for(f=x;f<=g;f++)L=o[f],a=A.get(L),a!==void 0&&a!==-1?(u[a]=i[f],p[a]=s[f],r&&(d[a]=r[f]),a=T[a],A.set(L,a)):s[f]();for(a=x;a<m;a++)a in u?(i[a]=u[a],s[a]=p[a],r&&(r[a]=d[a],r[a](a))):i[a]=ie(h);i=i.slice(0,l=m),o=c.slice(0)}return i});function h(m){if(s[a]=m,r){const[A,T]=G(a);return r[a]=T,t(c[a],A)}return t(c[a])}}}function j(e,t){return M(()=>e(t||{}))}const Je=e=>`Stale read from <${e}>.`;function se(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Y(Ye(()=>e.each,e.children,t||void 0))}function Qe(e){let t=!1;const n=(s,l)=>s[0]===l[0]&&(t?s[1]===l[1]:!s[1]==!l[1])&&s[2]===l[2],o=He(()=>e.children),i=Y(()=>{let s=o();Array.isArray(s)||(s=[s]);for(let l=0;l<s.length;l++){const r=s[l].when;if(r)return t=!!s[l].keyed,[l,r,s[l]]}return[-1]},void 0,{equals:n});return Y(()=>{const[s,l,r]=i();if(s<0)return e.fallback;const c=r.children;return typeof c=="function"&&c.length>0?M(()=>c(t?l:()=>{if(M(i)[0]!==s)throw Je("Match");return r.when})):c},void 0,void 0)}function Se(e){return e}function et(e,t,n){let o=n.length,i=t.length,s=o,l=0,r=0,c=t[i-1].nextSibling,f=null;for(;l<i||r<s;){if(t[l]===n[r]){l++,r++;continue}for(;t[i-1]===n[s-1];)i--,s--;if(i===l){const a=s<o?r?n[r-1].nextSibling:n[s-r]:c;for(;r<s;)e.insertBefore(n[r++],a)}else if(s===r)for(;l<i;)(!f||!f.has(t[l]))&&t[l].remove(),l++;else if(t[l]===n[s-1]&&n[r]===t[i-1]){const a=t[--i].nextSibling;e.insertBefore(n[r++],t[l++].nextSibling),e.insertBefore(n[--s],a),t[i]=n[s]}else{if(!f){f=new Map;let h=r;for(;h<s;)f.set(n[h],h++)}const a=f.get(t[l]);if(a!=null)if(r<a&&a<s){let h=l,m=1,A;for(;++h<i&&h<s&&!((A=f.get(t[h]))==null||A!==a+m);)m++;if(m>a-r){const T=t[l];for(;r<a;)e.insertBefore(n[r++],T)}else e.replaceChild(n[r++],t[l++])}else l++;else t[l++].remove()}}}const Ae="_$DX_DELEGATE";function De(e,t,n,o={}){let i;return ie(s=>{i=s,t===document?e():q(t,e(),t.firstChild?null:void 0,n)},o.owner),()=>{i(),t.textContent=""}}function U(e,t,n){let o;const i=()=>{const l=document.createElement("template");return l.innerHTML=e,n?l.content.firstChild.firstChild:l.content.firstChild},s=t?()=>M(()=>document.importNode(o||(o=i()),!0)):()=>(o||(o=i())).cloneNode(!0);return s.cloneNode=s,s}function tt(e,t=window.document){const n=t[Ae]||(t[Ae]=new Set);for(let o=0,i=e.length;o<i;o++){const s=e[o];n.has(s)||(n.add(s),t.addEventListener(s,nt))}}function re(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function q(e,t,n,o){if(n!==void 0&&!o&&(o=[]),typeof t!="function")return fe(e,t,o,n);Z(i=>fe(e,t(),i,n),o)}function nt(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const o=n[t];if(o&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?o.call(n,i,e):o.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function fe(e,t,n,o,i){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,l=o!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),l){let r=n[0];r&&r.nodeType===3?r.data=t:r=document.createTextNode(t),n=V(e,n,o,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=V(e,n,o);else{if(s==="function")return Z(()=>{let r=t();for(;typeof r=="function";)r=r();n=fe(e,r,n,o)}),()=>n;if(Array.isArray(t)){const r=[],c=n&&Array.isArray(n);if(ye(r,t,n,i))return Z(()=>n=fe(e,r,n,o,!0)),()=>n;if(r.length===0){if(n=V(e,n,o),l)return n}else c?n.length===0?Te(e,r,o):et(e,n,r):(n&&V(e),Te(e,r));n=r}else if(t.nodeType){if(Array.isArray(n)){if(l)return n=V(e,n,o,t);V(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function ye(e,t,n,o){let i=!1;for(let s=0,l=t.length;s<l;s++){let r=t[s],c=n&&n[s],f;if(!(r==null||r===!0||r===!1))if((f=typeof r)=="object"&&r.nodeType)e.push(r);else if(Array.isArray(r))i=ye(e,r,c)||i;else if(f==="function")if(o){for(;typeof r=="function";)r=r();i=ye(e,Array.isArray(r)?r:[r],Array.isArray(c)?c:[c])||i}else e.push(r),i=!0;else{const a=String(r);c&&c.nodeType===3&&c.data===a?e.push(c):e.push(document.createTextNode(a))}}return i}function Te(e,t,n=null){for(let o=0,i=t.length;o<i;o++)e.insertBefore(t[o],n)}function V(e,t,n,o){if(n===void 0)return e.textContent="";const i=o||document.createTextNode("");if(t.length){let s=!1;for(let l=t.length-1;l>=0;l--){const r=t[l];if(i!==r){const c=r.parentNode===e;!s&&!l?c?e.replaceChild(i,r):e.insertBefore(i,n):c&&r.remove()}else s=!0}}else e.insertBefore(i,n);return[i]}function ot(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var je={exports:{}};(function(e){(function(){function t(u,p){document.addEventListener?u.addEventListener("scroll",p,!1):u.attachEvent("scroll",p)}function n(u){document.body?u():document.addEventListener?document.addEventListener("DOMContentLoaded",function p(){document.removeEventListener("DOMContentLoaded",p),u()}):document.attachEvent("onreadystatechange",function p(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",p),u())})}function o(u){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(u)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(u,p){u.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+p+";"}function s(u){var p=u.g.offsetWidth,d=p+100;return u.j.style.width=d+"px",u.i.scrollLeft=d,u.h.scrollLeft=u.h.scrollWidth+100,u.l!==p?(u.l=p,!0):!1}function l(u,p){function d(){var g=x;s(g)&&g.g.parentNode!==null&&p(g.l)}var x=u;t(u.h,d),t(u.i,d),s(u)}function r(u,p,d){p=p||{},d=d||window,this.family=u,this.style=p.style||"normal",this.weight=p.weight||"normal",this.stretch=p.stretch||"normal",this.context=d}var c=null,f=null,a=null,h=null;function m(u){return f===null&&(A(u)&&/Apple/.test(window.navigator.vendor)?(u=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),f=!!u&&603>parseInt(u[1],10)):f=!1),f}function A(u){return h===null&&(h=!!u.document.fonts),h}function T(u,p){var d=u.style,x=u.weight;if(a===null){var g=document.createElement("div");try{g.style.font="condensed 100px sans-serif"}catch{}a=g.style.font!==""}return[d,x,a?u.stretch:"","100px",p].join(" ")}r.prototype.load=function(u,p){var d=this,x=u||"BESbswy",g=0,v=p||3e3,L=new Date().getTime();return new Promise(function(O,B){if(A(d.context)&&!m(d.context)){var E=new Promise(function(w,F){function I(){new Date().getTime()-L>=v?F(Error(""+v+"ms timeout exceeded")):d.context.document.fonts.load(T(d,'"'+d.family+'"'),x).then(function(D){1<=D.length?w():setTimeout(I,25)},F)}I()}),b=new Promise(function(w,F){g=setTimeout(function(){F(Error(""+v+"ms timeout exceeded"))},v)});Promise.race([b,E]).then(function(){clearTimeout(g),O(d)},B)}else n(function(){function w(){var $;($=N!=-1&&C!=-1||N!=-1&&y!=-1||C!=-1&&y!=-1)&&(($=N!=C&&N!=y&&C!=y)||(c===null&&($=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!$&&(536>parseInt($[1],10)||parseInt($[1],10)===536&&11>=parseInt($[2],10))),$=c&&(N==te&&C==te&&y==te||N==ne&&C==ne&&y==ne||N==oe&&C==oe&&y==oe)),$=!$),$&&(R.parentNode!==null&&R.parentNode.removeChild(R),clearTimeout(g),O(d))}function F(){if(new Date().getTime()-L>=v)R.parentNode!==null&&R.parentNode.removeChild(R),B(Error(""+v+"ms timeout exceeded"));else{var $=d.context.document.hidden;($===!0||$===void 0)&&(N=I.g.offsetWidth,C=D.g.offsetWidth,y=z.g.offsetWidth,w()),g=setTimeout(F,50)}}var I=new o(x),D=new o(x),z=new o(x),N=-1,C=-1,y=-1,te=-1,ne=-1,oe=-1,R=document.createElement("div");R.dir="ltr",i(I,T(d,"sans-serif")),i(D,T(d,"serif")),i(z,T(d,"monospace")),R.appendChild(I.g),R.appendChild(D.g),R.appendChild(z.g),d.context.document.body.appendChild(R),te=I.g.offsetWidth,ne=D.g.offsetWidth,oe=z.g.offsetWidth,F(),l(I,function($){N=$,w()}),i(I,T(d,'"'+d.family+'",sans-serif')),l(D,function($){C=$,w()}),i(D,T(d,'"'+d.family+'",serif')),l(z,function($){y=$,w()}),i(z,T(d,'"'+d.family+'",monospace'))})})},e.exports=r})()})(je);var it=je.exports;const st=ot(it);var J={};const rt="bold|bolder|lighter|[1-9]00",lt="italic|oblique",at="small-caps",ct="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",ft="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",$e=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,ut=new RegExp(`(${rt}) +`,"i"),dt=new RegExp(`(${lt}) +`,"i"),ht=new RegExp(`(${at}) +`,"i"),pt=new RegExp(`(${ct}) +`,"i"),mt=new RegExp(`([\\d\\.]+)(${ft}) *((?:${$e})( *, *(?:${$e}))*)`),me={},gt=16;var wt=e=>{if(me[e])return me[e];const t=mt.exec(e);if(!t)return;const n={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(t[1]),unit:t[2],family:t[3].replace(/["']/g,"").replace(/ *, */g,",")};let o,i,s,l;const r=e.substring(0,t.index);switch((o=ut.exec(r))&&(n.weight=o[1]),(i=dt.exec(r))&&(n.style=i[1]),(s=ht.exec(r))&&(n.variant=s[1]),(l=pt.exec(r))&&(n.stretch=l[1]),n.unit){case"pt":n.size/=.75;break;case"pc":n.size*=16;break;case"in":n.size*=96;break;case"cm":n.size*=96/2.54;break;case"mm":n.size*=96/25.4;break;case"%":break;case"em":case"rem":n.size*=gt/.75;break;case"q":n.size*=96/25.4/4;break}return me[e]=n};const yt=wt;J.parseFont=yt;var vt=J.createCanvas=function(e,t){return Object.assign(document.createElement("canvas"),{width:e,height:t})};J.createImageData=function(e,t,n){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(e);case 2:return new ImageData(e,t);default:return new ImageData(e,t,n)}};J.loadImage=function(e,t){return new Promise(function(n,o){const i=Object.assign(document.createElement("img"),t);function s(){i.onload=null,i.onerror=null}i.onload=function(){s(),n(i)},i.onerror=function(){s(),o(new Error('Failed to load the image "'+e+'"'))},i.src=e})};class k{static get SIZE(){return 800}}let ve;(function(e){class t extends Error{constructor(i,s){super(i,s),this.name="AssertionError"}}function n(o,i,s){if(!o)throw new t(i,s)}e.assert=n})(ve||(ve={}));const X=ve;class bt{get htmlCanvas(){return X.assert(this.platform==="WEB","html canvas should not appear in non-web enviroment`"),X.assert(this.nodeCanvas instanceof HTMLCanvasElement,'canvas in "node-canvas" package is no longer an `HTMLCanvasElement`'),this.nodeCanvas}toJpegBuffer(){return X.assert(this.platform==="NODE",`Unsupported to-jpeg-buffer operation for platform = ${this.platform}`),this.nodeCanvas.toBuffer("image/jpeg")}constructor(t,n,o,i,s,l,r){this.fontConfig=t,this.platform=n,this.content=o,this.paddingTop=i,this.lineSpacing=s,this.titleConfig=l,Object.assign(this,r),this.nodeCanvas=vt(k.SIZE,k.SIZE),this.nodeCanvasContext=this.getNodeCanvasContext(),this.render()}getNodeCanvasContext(){J.registerFont&&this.fontConfig.fontFilePath&&this.fontConfig.fontFace&&J.registerFont(this.fontConfig.fontFilePath,this.fontConfig.fontFace);const t=this.nodeCanvas.getContext("2d");return t.fillStyle="#ffffff",t.fillRect(0,0,k.SIZE,k.SIZE),t.font=[this.fontConfig.fontFace.style,this.fontConfig.fontFace.weight,`${this.fontConfig.fontSize}px`,this.fontConfig.fontFace.family].filter(Boolean).join(" "),t.textAlign="center",t.textBaseline="top",t.fillStyle="#000000",t}render(){this.renderTitle(),this.renderContent()}renderTitle(){if(!this.titleConfig)return;const{fontSize:t}=this.fontConfig,{text:n,startX:o}=this.titleConfig,i=o-n.length*t/2,s=this.scaledPaddingTop+t,l=t*n.length,r=3;this.nodeCanvasContext.fillRect(i,s,l,r);for(let c=0;c<n.length;c++){const f=i+(c+.5)*t;this.nodeCanvasContext.fillText(n[c],f,this.scaledPaddingTop)}}get titleTextAsBool(){var t;return!!((t=this.titleConfig)!=null&&t.text)}get titleTextAsNumber(){return Number(this.titleTextAsBool)}get scaledPaddingTop(){return this.paddingTop*this.fontConfig.fontSize}get maxRow(){const{fontConfig:{fontSize:t},lineSpacing:n,paddingTop:o}=this;return Math.floor((k.SIZE-t*o)/(t*n))}}class Ce extends bt{constructor(t,n,o,i,s,l,r){const c={fontSize:n<=4?k.SIZE/10:k.SIZE/16,fontFace:o},f=(n<=4?4:8)-n+ +!l,h=1.375+1.5/2*f,m=1.5,A=l?{text:l,startX:k.SIZE/2}:void 0;super(c,i,s,h,m,A,{...r,wordPerRow:t,row:n}),this.wordPerRow=t,this.row=n,this.fontFace=o,this.platform=i,this.content=s,this.titleText=l,this.options=r}renderContent(){for(let t=0,n=this.titleTextAsNumber;n-this.titleTextAsNumber<this.row;n++){const o=t+this.wordPerRow+1,i=this.content.slice(t,o),s=this.fontConfig.fontSize*this.lineSpacing,l=n*s+this.scaledPaddingTop;for(let r=0;r<i.length;r++){const c=(r+this.columnPadding)*this.fontConfig.fontSize+s;this.nodeCanvasContext.fillText(i[r],c,l)}t=o}}get columnPadding(){return(-this.wordPerRow+7)/2+(k.SIZE/10-this.fontConfig.fontSize)/(k.SIZE/80)}move(t){var n;return Object.assign(this,t),new Ce(t.wordPerRow??this.wordPerRow,t.row??this.row,t.fontFace??this.fontFace,t.platform??this.platform,t.content??this.content,t.titleText??((n=this.titleConfig)==null?void 0:n.text),{...this.options,...t.options,wordPerRow:t.wordPerRow??this.wordPerRow,row:t.row??this.row})}get maxColumn(){return k.SIZE/this.fontConfig.fontSize}}const Ct=U("<h2>Error!!"),xt=U("<h2>Loading..."),Et=U("<div class=creator-rows><h3>古詩創作家／TradEM Creator"),St=U('<div class=creator-rows><div class="creator-row creator-poem-image"><img width=350 height=350 title=poem-canvas></div><form class="creator-row creator-form-container"><div class=creator-form-rows><div class=creator-form-row><label for=poemTitle>標題</label><input type=text id=poemTitle name=firstname placeholder=標題。。。></div><div class=creator-form-row><label for=poemContent>內文</label><textarea id=poemContent name=poemContent placeholder=內文。。。 rows=5 cols=16></textarea></div><div class=creator-form-group><div class=creator-form-row><label for=poemRowCount>橫行行數</label><select id=poemRowCount name=poemRowCount></select></div><div class=creator-form-row><label for=poemColumnCount>直行字數</label><select id=poemColumnCount name=poemColumnCount></select></div><div class=creator-form-row><label for=poemFontFamily>字體</label><select id=poemFontFamily name=poemFontFamily></select></div></div><div class="creator-form-row creator-form-buttons"><input type=submit value=下載><input type=submit value=分享>'),ge=U("<option>"),_e={cwtexkai:"楷體",cwtexyen:"圓體",cwtexfangsong:"仿宋體",cwtexming:"明體"},Be="300",At=7,Tt=8,$t="cwtexkai",_t="WEB";function Ft(){const[e]=qe(async()=>{try{await Promise.all(Object.keys(_e).map(async n=>new st(n).load("你好世界你真美，你好世界你真美。",1e4)))}catch(n){alert(n)}}),t=()=>(X.assert(e.state==="ready","Unreachable non-ready font-state"),new Ce(At,Tt,{family:$t,weight:Be},_t,"",""));return j(Qe,{get fallback(){return xt()},get children(){return[j(Se,{get when(){return e.state==="ready"},get children(){return j(Pt,{get initedCanvas(){return t()},fontFamilyToLabelLookup:_e})}}),j(Se,{get when(){return e.state==="errored"},get children(){return Ct()}})]}})}function Pt(e){const[t,n]=G(e.initedCanvas),o=c=>{n(f=>f.move({titleText:c.target.value}))},i=c=>{n(f=>f.move({content:c.target.value.replace(/\n/g,"")}))},s=c=>{const f=h=>Number.isSafeInteger(h)&&h>=1&&h<=8,a=Number(c.target.value);X.assert(f(a),"Invalid value for `row`"),n(h=>h.move({row:a}))},l=c=>{const f=h=>Number.isSafeInteger(h)&&h>=1&&h<=7,a=Number(c.target.value);X.assert(f(a),"Invalid value for `column`"),n(h=>h.move({wordPerRow:a}))},r=c=>{const f=c.target.value;X.assert(Object.prototype.hasOwnProperty.call(e.fontFamilyToLabelLookup,f),"Invalid value for `font-family`"),n(a=>a.move({fontFace:{family:f,weight:Be}}))};return[Et(),(()=>{const c=St(),f=c.firstChild,a=f.firstChild,h=f.nextSibling,m=h.firstChild,A=m.firstChild,T=A.firstChild,u=T.nextSibling,p=A.nextSibling,d=p.firstChild,x=d.nextSibling,g=p.nextSibling,v=g.firstChild,L=v.firstChild,O=L.nextSibling,B=v.nextSibling,E=B.firstChild,b=E.nextSibling,w=B.nextSibling,F=w.firstChild,I=F.nextSibling,D=g.nextSibling,z=D.firstChild,N=z.nextSibling;return h.addEventListener("submit",C=>{C.preventDefault()}),u.$$input=o,x.$$input=i,O.$$input=s,q(O,j(se,{get each(){return Array(8).fill(0).map((C,y)=>y+1)},children:C=>(()=>{const y=ge();return y.value=C,q(y,C),y})()})),b.$$input=l,q(b,j(se,{get each(){return Array(7).fill(0).map((C,y)=>y+1)},children:C=>(()=>{const y=ge();return y.value=C,q(y,C),y})()})),I.$$input=r,q(I,j(se,{get each(){return Object.keys(e.fontFamilyToLabelLookup)},children:C=>(()=>{const y=ge();return y.value=C,q(y,()=>e.fontFamilyToLabelLookup[C]),y})()})),re(z,"data-disabled",!0),re(N,"data-disabled",!0),Z(()=>{var C,y;return re(a,"src",(y=(C=t())==null?void 0:C.htmlCanvas)==null?void 0:y.toDataURL())}),Z(()=>O.value=t().row),Z(()=>b.value=t().wordPerRow),Z(()=>I.value=t().fontFace.family),c})()]}tt(["input"]);const Lt=U("<link rel=preconnect href=https://fonts.googleapis.com>"),It=U("<link rel=preconnect href=https://fonts.gstatic.com crossorigin=anonymous>"),Ot=U('<link rel="stylesheet preload"as=style>');function Nt(){const e=["cwtexkai","cwtexyen","cwtexfangsong","notosanstc","cwtexming"];return[Lt(),It(),j(se,{each:e,children:t=>(()=>{const n=Ot();return re(n,"href",`https://fonts.googleapis.com/earlyaccess/${t}.css`),n})()})]}De(()=>j(Nt,{}),document.head);let Q=document.getElementById("root");Q||(Q=document.createElement("div"),Q.id="root",document.body.appendChild(Q));De(()=>j(Ft,{}),Q);
