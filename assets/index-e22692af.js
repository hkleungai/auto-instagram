(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Be=(e,t)=>e===t,ze=Symbol("solid-track"),le={equals:Be};let De=Le;const Z=1,ae=2,_e={owned:null,cleanups:null,context:null,owner:null},he={};var _=null;let pe=null,S=null,I=null,X=null,ue=0;function ie(e,t){const n=S,o=_,i=e.length===0,s=t===void 0?o:t,l=i?_e:{owned:null,cleanups:null,context:s?s.context:null,owner:s},r=i?e:()=>e(()=>q(()=>de(l)));_=l,S=null;try{return V(r,!0)}finally{S=n,_=o}}function Y(e,t){t=t?Object.assign({},le,t):le;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},o=i=>(typeof i=="function"&&(i=i(n.value)),Ie(n,i));return[Pe.bind(n),o]}function xe(e,t,n){const o=be(e,t,!0,Z);te(o)}function M(e,t,n){const o=be(e,t,!1,Z);te(o)}function J(e,t,n){n=n?Object.assign({},le,n):le;const o=be(e,t,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=n.equals||void 0,te(o),Pe.bind(o)}function Me(e){return e&&typeof e=="object"&&"then"in e}function qe(e,t,n){let o,i,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(o=!0,i=e,s=t||{}):(o=e,i=t,s=n||{});let l=null,r=he,c=!1,f="initialValue"in s,a=typeof o=="function"&&J(o);const p=new Set,[g,$]=(s.storage||Y)(s.initialValue),[E,u]=Y(void 0),[h,d]=Y(void 0,{equals:!1}),[b,m]=Y(f?"ready":"unresolved");function y(C,A,w,P){return l===C&&(l=null,P!==void 0&&(f=!0),(C===r||A===r)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(P,{value:A})),r=he,F(A,w)),A}function F(C,A){V(()=>{A===void 0&&$(()=>C),m(A!==void 0?"errored":f?"ready":"unresolved"),u(A);for(const w of p.keys())w.decrement();p.clear()},!1)}function B(){const C=He,A=g(),w=E();if(w!==void 0&&!l)throw w;return S&&!S.user&&C&&xe(()=>{h(),l&&(C.resolved||p.has(C)||(C.increment(),p.add(C)))}),A}function z(C=!0){if(C!==!1&&c)return;c=!1;const A=a?a():o;if(A==null||A===!1){y(l,q(g));return}const w=r!==he?r:q(()=>i(A,{value:g(),refetching:C}));return Me(w)?(l=w,c=!0,queueMicrotask(()=>c=!1),V(()=>{m(f?"refreshing":"pending"),d()},!1),w.then(P=>y(w,P,void 0,A),P=>y(w,void 0,ke(P),A))):(y(l,w,void 0,A),w)}return Object.defineProperties(B,{state:{get:()=>b()},error:{get:()=>E()},loading:{get(){const C=b();return C==="pending"||C==="refreshing"}},latest:{get(){if(!f)return B();const C=E();if(C&&!l)throw C;return g()}}}),a?xe(()=>z(!1)):z(!1),[B,{refetch:z,mutate:$}]}function q(e){if(S===null)return e();const t=S;S=null;try{return e()}finally{S=t}}function We(e){return _===null||(_.cleanups===null?_.cleanups=[e]:_.cleanups.push(e)),e}function Ze(e){const t=J(e),n=J(()=>we(t()));return n.toArray=()=>{const o=n();return Array.isArray(o)?o:o!=null?[o]:[]},n}let He;function Pe(){if(this.sources&&this.state)if(this.state===Z)te(this);else{const e=I;I=null,V(()=>ce(this),!1),I=e}if(S){const e=this.observers?this.observers.length:0;S.sources?(S.sources.push(this),S.sourceSlots.push(e)):(S.sources=[this],S.sourceSlots=[e]),this.observers?(this.observers.push(S),this.observerSlots.push(S.sources.length-1)):(this.observers=[S],this.observerSlots=[S.sources.length-1])}return this.value}function Ie(e,t,n){let o=e.value;return(!e.comparator||!e.comparator(o,t))&&(e.value=t,e.observers&&e.observers.length&&V(()=>{for(let i=0;i<e.observers.length;i+=1){const s=e.observers[i],l=pe&&pe.running;l&&pe.disposed.has(s),(l?!s.tState:!s.state)&&(s.pure?I.push(s):X.push(s),s.observers&&Ne(s)),l||(s.state=Z)}if(I.length>1e6)throw I=[],new Error},!1)),t}function te(e){if(!e.fn)return;de(e);const t=_,n=S,o=ue;S=_=e,Ue(e,e.value,o),S=n,_=t}function Ue(e,t,n){let o;try{o=e.fn(t)}catch(i){return e.pure&&(e.state=Z,e.owned&&e.owned.forEach(de),e.owned=null),e.updatedAt=n+1,Oe(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ie(e,o):e.value=o,e.updatedAt=n)}function be(e,t,n,o=Z,i){const s={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:_,context:_?_.context:null,pure:n};return _===null||_!==_e&&(_.owned?_.owned.push(s):_.owned=[s]),s}function Fe(e){if(e.state===0)return;if(e.state===ae)return ce(e);if(e.suspense&&q(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ue);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Z)te(e);else if(e.state===ae){const o=I;I=null,V(()=>ce(e,t[0]),!1),I=o}}function V(e,t){if(I)return e();let n=!1;t||(I=[]),X?n=!0:X=[],ue++;try{const o=e();return Xe(n),o}catch(o){n||(X=null),I=null,Oe(o)}}function Xe(e){if(I&&(Le(I),I=null),e)return;const t=X;X=null,t.length&&V(()=>De(t),!1)}function Le(e){for(let t=0;t<e.length;t++)Fe(e[t])}function ce(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const o=e.sources[n];if(o.sources){const i=o.state;i===Z?o!==t&&(!o.updatedAt||o.updatedAt<ue)&&Fe(o):i===ae&&ce(o,t)}}}function Ne(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=ae,n.pure?I.push(n):X.push(n),n.observers&&Ne(n))}}function de(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),o=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const s=i.pop(),l=n.observerSlots.pop();o<i.length&&(s.sourceSlots[l]=o,i[o]=s,n.observerSlots[o]=l)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)de(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function ke(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Oe(e,t=_){throw ke(e)}function we(e){if(typeof e=="function"&&!e.length)return we(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const o=we(e[n]);Array.isArray(o)?t.push.apply(t,o):t.push(o)}return t}return e}const Ke=Symbol("fallback");function Ee(e){for(let t=0;t<e.length;t++)e[t]()}function Ve(e,t,n={}){let o=[],i=[],s=[],l=0,r=t.length>1?[]:null;return We(()=>Ee(s)),()=>{let c=e()||[],f,a;return c[ze],q(()=>{let g=c.length,$,E,u,h,d,b,m,y,F;if(g===0)l!==0&&(Ee(s),s=[],o=[],i=[],l=0,r&&(r=[])),n.fallback&&(o=[Ke],i[0]=ie(B=>(s[0]=B,n.fallback())),l=1);else if(l===0){for(i=new Array(g),a=0;a<g;a++)o[a]=c[a],i[a]=ie(p);l=g}else{for(u=new Array(g),h=new Array(g),r&&(d=new Array(g)),b=0,m=Math.min(l,g);b<m&&o[b]===c[b];b++);for(m=l-1,y=g-1;m>=b&&y>=b&&o[m]===c[y];m--,y--)u[y]=i[m],h[y]=s[m],r&&(d[y]=r[m]);for($=new Map,E=new Array(y+1),a=y;a>=b;a--)F=c[a],f=$.get(F),E[a]=f===void 0?-1:f,$.set(F,a);for(f=b;f<=m;f++)F=o[f],a=$.get(F),a!==void 0&&a!==-1?(u[a]=i[f],h[a]=s[f],r&&(d[a]=r[f]),a=E[a],$.set(F,a)):s[f]();for(a=b;a<g;a++)a in u?(i[a]=u[a],s[a]=h[a],r&&(r[a]=d[a],r[a](a))):i[a]=ie(p);i=i.slice(0,l=g),o=c.slice(0)}return i});function p(g){if(s[a]=g,r){const[$,E]=Y(a);return r[a]=E,t(c[a],$)}return t(c[a])}}}function D(e,t){return q(()=>e(t||{}))}const Ge=e=>`Stale read from <${e}>.`;function se(e){const t="fallback"in e&&{fallback:()=>e.fallback};return J(Ve(()=>e.each,e.children,t||void 0))}function Ye(e){let t=!1;const n=(s,l)=>s[0]===l[0]&&(t?s[1]===l[1]:!s[1]==!l[1])&&s[2]===l[2],o=Ze(()=>e.children),i=J(()=>{let s=o();Array.isArray(s)||(s=[s]);for(let l=0;l<s.length;l++){const r=s[l].when;if(r)return t=!!s[l].keyed,[l,r,s[l]]}return[-1]},void 0,{equals:n});return J(()=>{const[s,l,r]=i();if(s<0)return e.fallback;const c=r.children;return typeof c=="function"&&c.length>0?q(()=>c(t?l:()=>{if(q(i)[0]!==s)throw Ge("Match");return r.when})):c},void 0,void 0)}function Se(e){return e}function Je(e,t,n){let o=n.length,i=t.length,s=o,l=0,r=0,c=t[i-1].nextSibling,f=null;for(;l<i||r<s;){if(t[l]===n[r]){l++,r++;continue}for(;t[i-1]===n[s-1];)i--,s--;if(i===l){const a=s<o?r?n[r-1].nextSibling:n[s-r]:c;for(;r<s;)e.insertBefore(n[r++],a)}else if(s===r)for(;l<i;)(!f||!f.has(t[l]))&&t[l].remove(),l++;else if(t[l]===n[s-1]&&n[r]===t[i-1]){const a=t[--i].nextSibling;e.insertBefore(n[r++],t[l++].nextSibling),e.insertBefore(n[--s],a),t[i]=n[s]}else{if(!f){f=new Map;let p=r;for(;p<s;)f.set(n[p],p++)}const a=f.get(t[l]);if(a!=null)if(r<a&&a<s){let p=l,g=1,$;for(;++p<i&&p<s&&!(($=f.get(t[p]))==null||$!==a+g);)g++;if(g>a-r){const E=t[l];for(;r<a;)e.insertBefore(n[r++],E)}else e.replaceChild(n[r++],t[l++])}else l++;else t[l++].remove()}}}const $e="_$DX_DELEGATE";function Re(e,t,n,o={}){let i;return ie(s=>{i=s,t===document?e():U(t,e(),t.firstChild?null:void 0,n)},o.owner),()=>{i(),t.textContent=""}}function H(e,t,n){let o;const i=()=>{const l=document.createElement("template");return l.innerHTML=e,n?l.content.firstChild.firstChild:l.content.firstChild},s=t?()=>q(()=>document.importNode(o||(o=i()),!0)):()=>(o||(o=i())).cloneNode(!0);return s.cloneNode=s,s}function Qe(e,t=window.document){const n=t[$e]||(t[$e]=new Set);for(let o=0,i=e.length;o<i;o++){const s=e[o];n.has(s)||(n.add(s),t.addEventListener(s,et))}}function re(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function U(e,t,n,o){if(n!==void 0&&!o&&(o=[]),typeof t!="function")return fe(e,t,o,n);M(i=>fe(e,t(),i,n),o)}function et(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const o=n[t];if(o&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?o.call(n,i,e):o.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function fe(e,t,n,o,i){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,l=o!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),l){let r=n[0];r&&r.nodeType===3?r.data=t:r=document.createTextNode(t),n=G(e,n,o,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=G(e,n,o);else{if(s==="function")return M(()=>{let r=t();for(;typeof r=="function";)r=r();n=fe(e,r,n,o)}),()=>n;if(Array.isArray(t)){const r=[],c=n&&Array.isArray(n);if(ye(r,t,n,i))return M(()=>n=fe(e,r,n,o,!0)),()=>n;if(r.length===0){if(n=G(e,n,o),l)return n}else c?n.length===0?Ae(e,r,o):Je(e,n,r):(n&&G(e),Ae(e,r));n=r}else if(t.nodeType){if(Array.isArray(n)){if(l)return n=G(e,n,o,t);G(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function ye(e,t,n,o){let i=!1;for(let s=0,l=t.length;s<l;s++){let r=t[s],c=n&&n[s],f;if(!(r==null||r===!0||r===!1))if((f=typeof r)=="object"&&r.nodeType)e.push(r);else if(Array.isArray(r))i=ye(e,r,c)||i;else if(f==="function")if(o){for(;typeof r=="function";)r=r();i=ye(e,Array.isArray(r)?r:[r],Array.isArray(c)?c:[c])||i}else e.push(r),i=!0;else{const a=String(r);c&&c.nodeType===3&&c.data===a?e.push(c):e.push(document.createTextNode(a))}}return i}function Ae(e,t,n=null){for(let o=0,i=t.length;o<i;o++)e.insertBefore(t[o],n)}function G(e,t,n,o){if(n===void 0)return e.textContent="";const i=o||document.createTextNode("");if(t.length){let s=!1;for(let l=t.length-1;l>=0;l--){const r=t[l];if(i!==r){const c=r.parentNode===e;!s&&!l?c?e.replaceChild(i,r):e.insertBefore(i,n):c&&r.remove()}else s=!0}}else e.insertBefore(i,n);return[i]}function tt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var je={exports:{}};(function(e){(function(){function t(u,h){document.addEventListener?u.addEventListener("scroll",h,!1):u.attachEvent("scroll",h)}function n(u){document.body?u():document.addEventListener?document.addEventListener("DOMContentLoaded",function h(){document.removeEventListener("DOMContentLoaded",h),u()}):document.attachEvent("onreadystatechange",function h(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",h),u())})}function o(u){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(u)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(u,h){u.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+h+";"}function s(u){var h=u.g.offsetWidth,d=h+100;return u.j.style.width=d+"px",u.i.scrollLeft=d,u.h.scrollLeft=u.h.scrollWidth+100,u.l!==h?(u.l=h,!0):!1}function l(u,h){function d(){var m=b;s(m)&&m.g.parentNode!==null&&h(m.l)}var b=u;t(u.h,d),t(u.i,d),s(u)}function r(u,h,d){h=h||{},d=d||window,this.family=u,this.style=h.style||"normal",this.weight=h.weight||"normal",this.stretch=h.stretch||"normal",this.context=d}var c=null,f=null,a=null,p=null;function g(u){return f===null&&($(u)&&/Apple/.test(window.navigator.vendor)?(u=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),f=!!u&&603>parseInt(u[1],10)):f=!1),f}function $(u){return p===null&&(p=!!u.document.fonts),p}function E(u,h){var d=u.style,b=u.weight;if(a===null){var m=document.createElement("div");try{m.style.font="condensed 100px sans-serif"}catch{}a=m.style.font!==""}return[d,b,a?u.stretch:"","100px",h].join(" ")}r.prototype.load=function(u,h){var d=this,b=u||"BESbswy",m=0,y=h||3e3,F=new Date().getTime();return new Promise(function(B,z){if($(d.context)&&!g(d.context)){var C=new Promise(function(w,P){function N(){new Date().getTime()-F>=y?P(Error(""+y+"ms timeout exceeded")):d.context.document.fonts.load(E(d,'"'+d.family+'"'),b).then(function(k){1<=k.length?w():setTimeout(N,25)},P)}N()}),A=new Promise(function(w,P){m=setTimeout(function(){P(Error(""+y+"ms timeout exceeded"))},y)});Promise.race([A,C]).then(function(){clearTimeout(m),B(d)},z)}else n(function(){function w(){var T;(T=L!=-1&&O!=-1||L!=-1&&v!=-1||O!=-1&&v!=-1)&&((T=L!=O&&L!=v&&O!=v)||(c===null&&(T=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!T&&(536>parseInt(T[1],10)||parseInt(T[1],10)===536&&11>=parseInt(T[2],10))),T=c&&(L==x&&O==x&&v==x||L==ne&&O==ne&&v==ne||L==oe&&O==oe&&v==oe)),T=!T),T&&(R.parentNode!==null&&R.parentNode.removeChild(R),clearTimeout(m),B(d))}function P(){if(new Date().getTime()-F>=y)R.parentNode!==null&&R.parentNode.removeChild(R),z(Error(""+y+"ms timeout exceeded"));else{var T=d.context.document.hidden;(T===!0||T===void 0)&&(L=N.g.offsetWidth,O=k.g.offsetWidth,v=W.g.offsetWidth,w()),m=setTimeout(P,50)}}var N=new o(b),k=new o(b),W=new o(b),L=-1,O=-1,v=-1,x=-1,ne=-1,oe=-1,R=document.createElement("div");R.dir="ltr",i(N,E(d,"sans-serif")),i(k,E(d,"serif")),i(W,E(d,"monospace")),R.appendChild(N.g),R.appendChild(k.g),R.appendChild(W.g),d.context.document.body.appendChild(R),x=N.g.offsetWidth,ne=k.g.offsetWidth,oe=W.g.offsetWidth,P(),l(N,function(T){L=T,w()}),i(N,E(d,'"'+d.family+'",sans-serif')),l(k,function(T){O=T,w()}),i(k,E(d,'"'+d.family+'",serif')),l(W,function(T){v=T,w()}),i(W,E(d,'"'+d.family+'",monospace'))})})},e.exports=r})()})(je);var nt=je.exports;const ot=tt(nt);var Q={};const it="bold|bolder|lighter|[1-9]00",st="italic|oblique",rt="small-caps",lt="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",at="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",Te=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,ct=new RegExp(`(${it}) +`,"i"),ft=new RegExp(`(${st}) +`,"i"),ut=new RegExp(`(${rt}) +`,"i"),dt=new RegExp(`(${lt}) +`,"i"),ht=new RegExp(`([\\d\\.]+)(${at}) *((?:${Te})( *, *(?:${Te}))*)`),me={},pt=16;var mt=e=>{if(me[e])return me[e];const t=ht.exec(e);if(!t)return;const n={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(t[1]),unit:t[2],family:t[3].replace(/["']/g,"").replace(/ *, */g,",")};let o,i,s,l;const r=e.substring(0,t.index);switch((o=ct.exec(r))&&(n.weight=o[1]),(i=ft.exec(r))&&(n.style=i[1]),(s=ut.exec(r))&&(n.variant=s[1]),(l=dt.exec(r))&&(n.stretch=l[1]),n.unit){case"pt":n.size/=.75;break;case"pc":n.size*=16;break;case"in":n.size*=96;break;case"cm":n.size*=96/2.54;break;case"mm":n.size*=96/25.4;break;case"%":break;case"em":case"rem":n.size*=pt/.75;break;case"q":n.size*=96/25.4/4;break}return me[e]=n};const gt=mt;Q.parseFont=gt;var wt=Q.createCanvas=function(e,t){return Object.assign(document.createElement("canvas"),{width:e,height:t})};Q.createImageData=function(e,t,n){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(e);case 2:return new ImageData(e,t);default:return new ImageData(e,t,n)}};Q.loadImage=function(e,t){return new Promise(function(n,o){const i=Object.assign(document.createElement("img"),t);function s(){i.onload=null,i.onerror=null}i.onload=function(){s(),n(i)},i.onerror=function(){s(),o(new Error('Failed to load the image "'+e+'"'))},i.src=e})};class j{static get SIZE(){return 800}}let ve;(function(e){class t extends Error{constructor(i,s){super(i,s),this.name="AssertionError"}}function n(o,i,s){if(!o)throw new t(i,s)}e.assert=n})(ve||(ve={}));const K=ve;class yt{get htmlCanvas(){return K.assert(this.platform==="WEB","html canvas should not appear in non-web enviroment`"),K.assert(this.nodeCanvas instanceof HTMLCanvasElement,'canvas in "node-canvas" package is no longer an `HTMLCanvasElement`'),this.nodeCanvas}toJpegBuffer(){return K.assert(this.platform==="NODE",`Unsupported to-jpeg-buffer operation for platform = ${this.platform}`),this.nodeCanvas.toBuffer("image/jpeg")}constructor(t,n,o,i,s,l,r){this.fontConfig=t,this.platform=n,this.content=o,this.paddingTop=i,this.lineSpacing=s,this.titleConfig=l,Object.assign(this,r),this.nodeCanvas=wt(j.SIZE,j.SIZE),this.nodeCanvasContext=this.getNodeCanvasContext(),this.render()}getNodeCanvasContext(){Q.registerFont&&this.fontConfig.fontFilePath&&this.fontConfig.fontFace&&Q.registerFont(this.fontConfig.fontFilePath,this.fontConfig.fontFace);const t=this.nodeCanvas.getContext("2d");return t.fillStyle="#ffffff",t.fillRect(0,0,j.SIZE,j.SIZE),t.font=[this.fontConfig.fontFace.style,this.fontConfig.fontFace.weight,`${this.fontConfig.fontSize}px`,this.fontConfig.fontFace.family].filter(Boolean).join(" "),t.textAlign="center",t.textBaseline="top",t.fillStyle="#000000",t}render(){this.renderTitle(),this.renderContent()}renderTitle(){if(!this.titleConfig)return;const{fontSize:t}=this.fontConfig,{text:n,startX:o}=this.titleConfig,i=o-n.length*t/2,s=this.scaledPaddingTop+t,l=t*n.length,r=3;this.nodeCanvasContext.fillRect(i,s,l,r);for(let c=0;c<n.length;c++){const f=i+(c+.5)*t;this.nodeCanvasContext.fillText(n[c],f,this.scaledPaddingTop)}}get titleTextAsBool(){var t;return!!((t=this.titleConfig)!=null&&t.text)}get titleTextAsNumber(){return Number(this.titleTextAsBool)}get scaledPaddingTop(){return this.paddingTop*this.fontConfig.fontSize}get maxRow(){const{fontConfig:{fontSize:t},lineSpacing:n,paddingTop:o}=this;return Math.floor((j.SIZE-t*o)/(t*n))}}class Ce extends yt{constructor(t,n,o,i,s,l,r){const c={fontSize:n<=4?j.SIZE/10:j.SIZE/16,fontFace:o},f=(n<=4?4:8)-n+ +!l,p=1.375+1.5/2*f,g=1.5,$=l?{text:l,startX:j.SIZE/2}:void 0;super(c,i,s,p,g,$,{...r,wordPerRow:t,row:n}),this.wordPerRow=t,this.row=n,this.fontFace=o,this.platform=i,this.content=s,this.titleText=l,this.options=r}renderContent(){for(let t=0,n=this.titleTextAsNumber;n-this.titleTextAsNumber<this.row;n++){const o=t+this.wordPerRow+1,i=this.content.slice(t,o),s=this.fontConfig.fontSize*this.lineSpacing,l=n*s+this.scaledPaddingTop;for(let r=0;r<i.length;r++){const c=(r+this.columnPadding)*this.fontConfig.fontSize+s;this.nodeCanvasContext.fillText(i[r],c,l)}t=o}}get columnPadding(){return(-this.wordPerRow+7)/2+(j.SIZE/10-this.fontConfig.fontSize)/(j.SIZE/80)}move(t){var n;return Object.assign(this,t),new Ce(t.wordPerRow??this.wordPerRow,t.row??this.row,t.fontFace??this.fontFace,t.platform??this.platform,t.content??this.content,t.titleText??((n=this.titleConfig)==null?void 0:n.text),{...this.options,...t.options,wordPerRow:t.wordPerRow??this.wordPerRow,row:t.row??this.row})}get maxColumn(){return j.SIZE/this.fontConfig.fontSize}}const vt=H("<h2>Error!!"),bt=H("<h2>Loading..."),Ct=H("<div class=creator-rows><h3>古詩創作家／TradEM Creator"),xt=H('<div class=creator-rows><div class="creator-row creator-poem-image"><img width=350 height=350 title=poem-canvas></div><form class="creator-row creator-form-container"><div class=creator-form-rows><div class=creator-form-group><div class=creator-form-row><label for=poemTitle>標題</label><input type=text id=poemTitle name=firstname placeholder=標題。。。></div><div class=creator-form-row><label for=poemFontFamily>字體</label><select id=poemFontFamily name=poemFontFamily></select></div></div><div class=creator-form-group><div class=creator-form-row><label for=poemRowCount>橫行行數</label><select id=poemRowCount name=poemRowCount></select></div><div class=creator-form-row><label for=poemColumnCount>直行字數</label><select id=poemColumnCount name=poemColumnCount></select></div></div><div class=creator-form-row><label for=poemContent>內文</label><textarea id=poemContent name=poemContent placeholder=內文。。。 rows=5 cols=16></textarea></div><div class="creator-form-row creator-form-buttons"><input type=submit value=下載><input type=submit value=分享>'),ge=H("<option>");function Et(){const e={cwtexkai:"楷體",cwtexyen:"圓體",cwtexfangsong:"仿宋體",cwtexming:"明體"},[t]=qe(async()=>{try{await Promise.all(Object.keys(e).map(async o=>new ot(o).load("你好世界你真美，你好世界你真美。",10*1e3)))}catch(o){alert(o)}}),n=()=>(K.assert(t.state==="ready","Unreachable non-ready font-state"),new Ce(7,8,{family:"cwtexkai",weight:"300"},"WEB","丞相祠堂何處尋，錦官城外柏森森。映階碧草自春色，隔葉黃鸝空好音。三顧頻煩天下計，兩朝開濟老臣心。出師未捷身先死，長使英雄淚滿襟。","蜀相"));return D(Ye,{get fallback(){return bt()},get children(){return[D(Se,{get when(){return t.state==="ready"},get children(){return D(St,{get initedCanvas(){return n()},fontFamilyToLabelLookup:e})}}),D(Se,{get when(){return t.state==="errored"},get children(){return vt()}})]}})}function St(e){const[t,n]=Y(e.initedCanvas),o=c=>{n(f=>f.move({titleText:c.target.value}))},i=c=>{n(f=>f.move({content:c.target.value}))},s=c=>{const f=a=>Number.isSafeInteger(a)&&a>=1&&a<=8;n(a=>{const p=Number(c.target.value);return K.assert(f(p),"Invalid value for `row`"),a.move({row:p})})},l=c=>{const f=a=>Number.isSafeInteger(a)&&a>=1&&a<=7;n(a=>{const p=Number(c.target.value);return K.assert(f(p),"Invalid value for `column`"),a.move({wordPerRow:p})})},r=c=>{n(f=>{const a=c.target.value;return K.assert(Object.prototype.hasOwnProperty.call(e.fontFamilyToLabelLookup,a),"Invalid value for `font-family`"),f.move({fontFace:{family:a,weight:"300"}})})};return[Ct(),(()=>{const c=xt(),f=c.firstChild,a=f.firstChild,p=f.nextSibling,g=p.firstChild,$=g.firstChild,E=$.firstChild,u=E.firstChild,h=u.nextSibling,d=E.nextSibling,b=d.firstChild,m=b.nextSibling,y=$.nextSibling,F=y.firstChild,B=F.firstChild,z=B.nextSibling,C=F.nextSibling,A=C.firstChild,w=A.nextSibling,P=y.nextSibling,N=P.firstChild,k=N.nextSibling,W=P.nextSibling,L=W.firstChild,O=L.nextSibling;return p.addEventListener("submit",v=>{v.preventDefault()}),h.$$input=o,m.$$input=r,U(m,D(se,{get each(){return Object.keys(e.fontFamilyToLabelLookup)},children:v=>(()=>{const x=ge();return x.value=v,U(x,()=>e.fontFamilyToLabelLookup[v]),x})()})),z.$$input=s,U(z,D(se,{get each(){return Array(8).fill(0).map((v,x)=>x+1)},children:v=>(()=>{const x=ge();return x.value=v,U(x,v),x})()})),w.$$input=l,U(w,D(se,{get each(){return Array(7).fill(0).map((v,x)=>x+1)},children:v=>(()=>{const x=ge();return x.value=v,U(x,v),x})()})),k.$$input=i,re(L,"data-disabled",!0),re(O,"data-disabled",!0),M(()=>{var v,x;return re(a,"src",(x=(v=t())==null?void 0:v.htmlCanvas)==null?void 0:x.toDataURL())}),M(()=>h.value=t().titleText),M(()=>m.value=t().fontFace.family),M(()=>z.value=t().row),M(()=>w.value=t().wordPerRow),M(()=>k.value=t().content),c})()]}Qe(["input"]);const $t=H("<link rel=preconnect href=https://fonts.googleapis.com>"),At=H("<link rel=preconnect href=https://fonts.gstatic.com crossorigin=anonymous>"),Tt=H('<link rel="stylesheet preload"as=style>');function _t(){const e=["cwtexkai","cwtexyen","cwtexfangsong","notosanstc","cwtexming"];return[$t(),At(),D(se,{each:e,children:t=>(()=>{const n=Tt();return re(n,"href",`https://fonts.googleapis.com/earlyaccess/${t}.css`),n})()})]}Re(()=>D(_t,{}),document.head);let ee=document.getElementById("root");ee||(ee=document.createElement("div"),ee.id="root",document.body.appendChild(ee));Re(()=>D(Et,{}),ee);
